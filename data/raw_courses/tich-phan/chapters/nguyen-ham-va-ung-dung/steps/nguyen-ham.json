{
  "id": "nguyen-ham",
  "title": "Nguyên Hàm",
  "description": "Cho f, tìm tất cả F sao cho F'(x) = f(x) — họ nguyên hàm sai khác nhau hằng số C.",
  "xp_reward": 10,
  "order_index": 0,
  "slides": [
    {
      "order_index": 0,
      "blocks": [
        {
          "id": "ia-antiderivative-family",
          "type": "interaction",
          "content": {
            "interactionType": "B",
            "lesson": {
              "interactionType": "B",
              "meta": {
                "parameterLabel": "Hằng số C"
              },
              "parameter": {
                "min": -4,
                "max": 4,
                "initial": 0
              },
              "system": {
                "resolution": 200,
                "view": {
                  "xMin": -3.5,
                  "xMax": 3.5,
                  "yMin": -6,
                  "yMax": 14
                },
                "curves": [
                  {
                    "expr": "2*x",
                    "color": "#3498db",
                    "label": "f(x) = 2x",
                    "style": "solid",
                    "width": 2
                  },
                  {
                    "expr": "x*x + p",
                    "color": "#e67e22",
                    "label": "F(x) = x² + C",
                    "style": "solid",
                    "width": 2
                  }
                ]
              },
              "reflections": [
                {
                  "id": "at-zero",
                  "trigger": "state.currentValue > -0.3 && state.currentValue < 0.3",
                  "text": "$F(x) = x^2$. Đạo hàm $F'(x) = 2x = f(x)$. Đây là một nguyên hàm đúng."
                },
                {
                  "id": "at-positive",
                  "trigger": "state.currentValue > 2.5 && state.currentValue < 3.5",
                  "text": "$F(x) = x^2 + 3$. Dịch lên $3$ đơn vị nhưng $F'(x)$ vẫn bằng $2x$ — đạo hàm của hằng số bằng $0$."
                },
                {
                  "id": "at-negative",
                  "trigger": "state.currentValue < -2.5 && state.currentValue > -3.5",
                  "text": "$F(x) = x^2 - 3$. Dịch xuống — nhưng độ dốc tại mỗi $x$ không đổi. Mọi $x^2 + C$ đều có đạo hàm $2x$."
                },
                {
                  "id": "at-extreme",
                  "trigger": "state.currentValue > 3.5 || state.currentValue < -3.5",
                  "text": "Dù $C$ bất kỳ, $F'(x) = f(x)$. Nguyên hàm không duy nhất — mà là cả một **họ hàm** dịch đứng."
                }
              ],
              "prompt": "Kéo $C$ để dịch đường cam $F(x) = x^2 + C$ lên xuống. Đạo hàm $F'(x)$ có thay đổi khi $C$ thay đổi không?"
            }
          }
        }
      ]
    },
    {
      "order_index": 1,
      "blocks": [
        {
          "id": "text-nguyen-ham-dinh-nghia",
          "type": "text",
          "content": {
            "heading": "Nguyên hàm là gì?",
            "paragraphs": [
              "Bạn vừa thấy: dù $C$ thay đổi, mọi đường $F(x) = x^2 + C$ đều có cùng đạo hàm $F'(x) = 2x$. Ta gọi $F$ là **nguyên hàm** (antiderivative) của $f$ nếu $F'(x) = f(x)$ trên mọi $x$ trong miền xác định.",
              "Từ FTC Phần II: $\\int_a^b f(x)\\,dx = F(b) - F(a)$. Muốn tính tích phân, cần tìm nguyên hàm $F$. Nhưng nguyên hàm nào? Hằng số $C$ triệt tiêu khi trừ, nên **mọi nguyên hàm đều cho cùng kết quả**."
            ]
          }
        },
        {
          "id": "math-nguyen-ham",
          "type": "math",
          "content": {
            "latex": "\\int f(x)\\,dx = F(x) + C, \\quad \\text{trong đó } F'(x) = f(x)"
          }
        }
      ]
    },
    {
      "order_index": 2,
      "blocks": [
        {
          "id": "text-cong-thuc-co-ban",
          "type": "text",
          "content": {
            "heading": "Công thức nguyên hàm cơ bản",
            "paragraphs": [
              "Từ các quy tắc đạo hàm đã học, ta \"đọc ngược\": nếu $\\frac{d}{dx}[x^{n+1}/(n+1)] = x^n$ thì $\\int x^n\\,dx = \\frac{x^{n+1}}{n+1} + C$ với $n \\neq -1$. Tương tự: $\\int \\cos(x)\\,dx = \\sin(x) + C$ vì $(\\sin x)' = \\cos x$.",
              "Ký hiệu $\\int f(x)\\,dx$ gọi là **tích phân bất định** — nó cho cả họ hàm $F(x) + C$, không phải một số. Khác với tích phân xác định $\\int_a^b$ cho một giá trị duy nhất."
            ]
          }
        }
      ]
    },
    {
      "order_index": 3,
      "blocks": [
        {
          "id": "quiz-l9-q1",
          "type": "quiz",
          "content": {
            "question": "Trong tương tác, khi bạn thay đổi $C$, điều gì xảy ra với đạo hàm $F'(x)$ của đường cam?",
            "options": [
              { "value": "a", "label": "$F'(x)$ tăng khi $C$ tăng" },
              { "value": "b", "label": "$F'(x)$ giảm khi $C$ tăng" },
              { "value": "c", "label": "$F'(x)$ không đổi — luôn bằng $f(x) = 2x$" },
              { "value": "d", "label": "$F'(x)$ đổi dấu khi $C$ đổi dấu" }
            ],
            "correct": "c",
            "explanation": "Dịch đứng không thay đổi độ dốc. $\\frac{d}{dx}(x^2 + C) = 2x$ với mọi $C$, vì đạo hàm của hằng số bằng $0$. Đó là lý do nguyên hàm không duy nhất."
          }
        }
      ]
    },
    {
      "order_index": 4,
      "blocks": [
        {
          "id": "quiz-l9-q2",
          "type": "quiz",
          "content": {
            "question": "Tìm nguyên hàm tổng quát: $\\int 3x^2\\,dx = ?$",
            "options": [
              { "value": "a", "label": "$x^3 + C$" },
              { "value": "b", "label": "$6x + C$" },
              { "value": "c", "label": "$x^3$" },
              { "value": "d", "label": "$3x^3 + C$" }
            ],
            "correct": "a",
            "explanation": "Đọc ngược quy tắc lũy thừa: $\\frac{d}{dx}[x^3] = 3x^2$, nên $\\int 3x^2\\,dx = x^3 + C$. Đáp án $6x$ là đạo hàm của $3x^2$, không phải nguyên hàm. Đáp án $x^3$ thiếu $+C$."
          }
        }
      ]
    },
    {
      "order_index": 5,
      "blocks": [
        {
          "id": "quiz-l9-q3",
          "type": "quiz",
          "content": {
            "question": "$F(x) = \\sin(x) + 5$ có phải nguyên hàm của $f(x) = \\cos(x)$ không?",
            "options": [
              { "value": "a", "label": "Không, vì $F(0) \\neq 0$" },
              { "value": "b", "label": "Không, vì nguyên hàm đúng là $\\sin(x)$, không có $+5$" },
              { "value": "c", "label": "Có, vì $F'(x) = \\cos(x) = f(x)$" },
              { "value": "d", "label": "Chỉ đúng khi $x > 0$" }
            ],
            "correct": "c",
            "explanation": "Nguyên hàm chỉ yêu cầu $F'(x) = f(x)$. Ở đây $F'(x) = \\cos(x) = f(x)$ trên toàn bộ miền. Giá trị $F(0)$ hay hằng số $+5$ không ảnh hưởng — bất kỳ $\\sin(x) + C$ nào cũng là nguyên hàm đúng."
          }
        }
      ]
    },
    {
      "order_index": 6,
      "blocks": [
        {
          "id": "quiz-l9-q4",
          "type": "quiz",
          "content": {
            "question": "Tại sao tích phân bất định $\\int f(x)\\,dx$ không cho một số mà cho cả họ hàm?",
            "options": [
              { "value": "a", "label": "Vì tích phân luôn có nhiều nghiệm" },
              { "value": "b", "label": "Vì bài toán \"tìm $F$ sao cho $F' = f$\" có vô số lời giải — dịch đứng bất kỳ $F + C$ đều thỏa" },
              { "value": "c", "label": "Vì ký hiệu $\\int$ nghĩa là \"tập hợp\"" },
              { "value": "d", "label": "Vì không có cận tích phân nên kết quả không xác định" }
            ],
            "correct": "b",
            "explanation": "Nếu $F'(x) = f(x)$ thì $(F+C)' = F' + 0 = f$ với mọi hằng số $C$. Vô số hàm có cùng đạo hàm — chúng chỉ khác nhau một dịch đứng. Tích phân bất định biểu diễn cả họ này bằng $F(x) + C$."
          }
        }
      ]
    },
    {
      "order_index": 7,
      "blocks": [
        {
          "id": "quiz-l9-q5",
          "type": "quiz",
          "content": {
            "question": "Tìm $\\int (4x^3 - 2x)\\,dx$.",
            "options": [
              { "value": "a", "label": "$12x^2 - 2 + C$" },
              { "value": "b", "label": "$x^4 - x^2 + C$" },
              { "value": "c", "label": "$x^4 - x^2$" },
              { "value": "d", "label": "$4x^4 - 2x^2 + C$" }
            ],
            "correct": "b",
            "explanation": "$\\int 4x^3\\,dx = x^4$ (vì $(x^4)' = 4x^3$) và $\\int 2x\\,dx = x^2$ (vì $(x^2)' = 2x$). Tổng hợp: $x^4 - x^2 + C$. Đáp án $12x^2 - 2$ là đạo hàm, đi sai hướng."
          }
        }
      ]
    },
    {
      "order_index": 8,
      "blocks": [
        {
          "id": "quiz-l9-q6",
          "type": "quiz",
          "content": {
            "question": "Dùng FTC II: $\\int_0^2 2x\\,dx = F(2) - F(0)$ với $F(x) = x^2 + C$. Nếu chọn $C = 100$, kết quả thay đổi thế nào?",
            "options": [
              { "value": "a", "label": "Kết quả tăng thêm $100$" },
              { "value": "b", "label": "Kết quả tăng thêm $200$" },
              { "value": "c", "label": "Kết quả không đổi — hằng số triệt tiêu: $(4+100)-(0+100) = 4$" },
              { "value": "d", "label": "Không được chọn $C = 100$, phải chọn $C = 0$" }
            ],
            "correct": "c",
            "explanation": "$F(2) - F(0) = (4 + C) - (0 + C) = 4$ với mọi $C$. Hằng số triệt tiêu khi trừ — đó là lý do tích phân xác định cho kết quả duy nhất dù nguyên hàm không duy nhất."
          }
        }
      ]
    },
    {
      "order_index": 9,
      "blocks": [
        {
          "id": "quiz-l9-q7",
          "type": "quiz",
          "content": {
            "question": "Nếu $F(x)$ và $G(x)$ đều là nguyên hàm của $f(x)$ trên $\\mathbb{R}$, thì $F(x) - G(x)$ bằng gì?",
            "options": [
              { "value": "a", "label": "$0$ (chúng bằng nhau)" },
              { "value": "b", "label": "Một hằng số $C$" },
              { "value": "c", "label": "Một hàm tuyến tính $ax + b$" },
              { "value": "d", "label": "Không xác định được" }
            ],
            "correct": "b",
            "explanation": "$(F - G)' = F' - G' = f - f = 0$. Hàm có đạo hàm bằng $0$ trên mọi nơi phải là hằng số (hệ quả của Định lý Giá trị Trung bình). Vậy $F(x) = G(x) + C$ — hai nguyên hàm bất kỳ chỉ khác nhau một hằng số."
          }
        }
      ]
    },
    {
      "order_index": 10,
      "blocks": [
        {
          "id": "quiz-l9-q8",
          "type": "quiz",
          "content": {
            "question": "Gia tốc của vật $a(t) = 6t$ (m/s²). Biết vận tốc ban đầu $v(0) = 2$ m/s. Tìm $v(t)$.",
            "options": [
              { "value": "a", "label": "$v(t) = 3t^2$" },
              { "value": "b", "label": "$v(t) = 3t^2 + 2$" },
              { "value": "c", "label": "$v(t) = 6t + 2$" },
              { "value": "d", "label": "$v(t) = 6t^2 + 2$" }
            ],
            "correct": "b",
            "explanation": "$v(t) = \\int 6t\\,dt = 3t^2 + C$. Dùng điều kiện đầu: $v(0) = 0 + C = 2$, suy ra $C = 2$. Vậy $v(t) = 3t^2 + 2$. Điều kiện đầu chính là cách chọn $C$ phù hợp trong họ nguyên hàm."
          }
        }
      ]
    },
    {
      "order_index": 11,
      "blocks": [
        {
          "id": "quiz-l9-q9",
          "type": "quiz",
          "content": {
            "question": "Tìm $\\int \\cos(x)\\,dx$.",
            "options": [
              { "value": "a", "label": "$-\\sin(x) + C$" },
              { "value": "b", "label": "$\\sin(x) + C$" },
              { "value": "c", "label": "$\\cos(x) + C$" },
              { "value": "d", "label": "$-\\cos(x) + C$" }
            ],
            "correct": "b",
            "explanation": "$(\\sin x)' = \\cos x$, nên $\\int \\cos(x)\\,dx = \\sin(x) + C$. Đọc ngược quy tắc đạo hàm lượng giác: đạo hàm $\\sin$ cho $\\cos$, nên nguyên hàm $\\cos$ cho $\\sin$."
          }
        }
      ]
    }
  ]
}
