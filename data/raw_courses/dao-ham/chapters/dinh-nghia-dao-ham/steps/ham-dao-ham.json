{
    "id": "ham-dao-ham",
    "title": "Hàm đạo hàm f′",
    "description": "Tính đạo hàm tại mọi điểm trong miền xác định tạo ra một hàm mới — hàm đạo hàm f′(x).",
    "xp_reward": 10,
    "order_index": 2,
    "slides": [
        {
            "order_index": 0,
            "blocks": [
                {
                    "id": "ia-m3l3-param",
                    "type": "interaction",
                    "content": {
                        "interactionType": "B",
                        "lesson": {
                            "interactionType": "B",
                            "meta": {
                                "parameterLabel": "Điểm neo $a$"
                            },
                            "parameter": {
                                "min": -2.5,
                                "max": 2.5,
                                "initial": 0
                            },
                            "system": {
                                "resolution": 300,
                                "view": {
                                    "xMin": -3,
                                    "xMax": 3,
                                    "yMin": -6,
                                    "yMax": 9
                                },
                                "curves": [
                                    {
                                        "expr": "x*x*x - 3*x",
                                        "color": "#3498db",
                                        "label": "f(x) = x³ − 3x",
                                        "style": "solid",
                                        "width": 2
                                    },
                                    {
                                        "expr": "3*p*p - 3",
                                        "color": "#e74c3c",
                                        "label": "f′(a) tại điểm neo",
                                        "style": "dashed",
                                        "width": 2
                                    }
                                ]
                            },
                            "reflections": [
                                {
                                    "id": "zero-a",
                                    "trigger": "state.currentValue > -0.15 && state.currentValue < 0.15",
                                    "text": "Tại $a = 0$: $f'(0) = -3 < 0$ — đường ngang đỏ nằm dưới trục $x$. Hàm đang giảm tại đây."
                                },
                                {
                                    "id": "crit",
                                    "trigger": "(state.currentValue > 0.9 && state.currentValue < 1.1) || (state.currentValue > -1.1 && state.currentValue < -0.9)",
                                    "text": "Tại $a = \\pm 1$: $f'(a) = 0$ — đường đỏ chạm trục $x$. Đây là điểm cực trị của $f$."
                                },
                                {
                                    "id": "large",
                                    "trigger": "state.currentValue > 1.8 || state.currentValue < -1.8",
                                    "text": "Tại $|a| > 1$: $f'(a) > 0$ — đường ngang đỏ dương. Hàm đang tăng. Đừng nhầm giá trị hàm với đạo hàm."
                                }
                            ],
                            "prompt": "Kéo điểm neo $a$. Đường ngang đỏ hiển thị giá trị $f'(a)$. Nếu bạn ghi lại giá trị đỏ này tại mỗi điểm $a$, đường gì sẽ xuất hiện?"
                        }
                    }
                }
            ]
        },
        {
            "order_index": 1,
            "blocks": [
                {
                    "id": "txt-m3l3-def",
                    "type": "text",
                    "content": {
                        "heading": "Từ số đến hàm: f′ là một hàm số",
                        "paragraphs": [
                            "Khi tính đạo hàm tại một điểm $a$, ta được một số: $f'(a)$. Nếu thực hiện điều này tại mọi điểm trong miền của $f$, ta nhận được **một quy luật mới**: $x \\mapsto f'(x)$.",
                            "**Hàm đạo hàm** $f'$ gán cho mỗi $x$ giá trị bằng tốc độ thay đổi tức thời của $f$ tại đó — đây là một hàm số hoàn chỉnh với miền, giá trị và dạng giải tích riêng."
                        ]
                    }
                },
                {
                    "id": "math-m3l3-def",
                    "type": "math",
                    "content": {
                        "latex": "f'(x) = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h} \\quad \\Rightarrow \\quad f(x) = x^3 - 3x \\Rightarrow f'(x) = 3x^2 - 3"
                    }
                }
            ]
        },
        {
            "order_index": 2,
            "blocks": [
                {
                    "id": "txt-m3l3-read",
                    "type": "text",
                    "content": {
                        "heading": "Đọc f′ từ đồ thị f",
                        "paragraphs": [
                            "Từ đồ thị $f$, ta suy ra hình dạng của $f'$: nơi $f$ tăng thì $f' > 0$; nơi $f$ giảm thì $f' < 0$; nơi $f$ đổi chiều thì $f' = 0$.",
                            "Không cần biết công thức — chỉ cần đọc hành vi từ đồ thị là đủ để xác định dấu và điểm không của $f'$."
                        ]
                    }
                }
            ]
        },
        {
            "order_index": 3,
            "blocks": [
                {
                    "id": "quiz-m3l3-q1",
                    "type": "quiz",
                    "content": {
                        "question": "Khi kéo điểm neo từ $a = -2.5$ đến $a = 2.5$ trên $f(x) = x^3 - 3x$, đường ngang đỏ vẽ nên hình dạng gì?",
                        "options": [
                            {
                                "value": "a",
                                "label": "Một đường thẳng (độ dốc không đổi)."
                            },
                            {
                                "value": "b",
                                "label": "Một parabol hình chữ U (bậc hai)."
                            },
                            {
                                "value": "c",
                                "label": "Một đường cong chữ S (bậc ba)."
                            },
                            {
                                "value": "d",
                                "label": "Một đường ngang phẳng."
                            }
                        ],
                        "correct": "b",
                        "explanation": "$f'(x) = 3x^2 - 3$ là hàm bậc hai — đồ thị của nó là parabol. Kéo điểm neo qua toàn miền đã vẽ ra parabol này một cách ngầm định."
                    }
                }
            ]
        },
        {
            "order_index": 4,
            "blocks": [
                {
                    "id": "quiz-m3l3-q2",
                    "type": "quiz",
                    "content": {
                        "question": "Nếu $f(x) = x^3 - 3x$, tính $f'(2)$.",
                        "options": [
                            {
                                "value": "a",
                                "label": "$6$"
                            },
                            {
                                "value": "b",
                                "label": "$9$"
                            },
                            {
                                "value": "c",
                                "label": "$12$"
                            },
                            {
                                "value": "d",
                                "label": "$3$"
                            }
                        ],
                        "correct": "b",
                        "explanation": "$f'(x) = 3x^2 - 3$. Tại $x = 2$: $f'(2) = 12 - 3 = 9$."
                    }
                }
            ]
        },
        {
            "order_index": 5,
            "blocks": [
                {
                    "id": "quiz-m3l3-q3",
                    "type": "quiz",
                    "content": {
                        "question": "Tại sao $f'$ được gọi là một \"hàm số\" chứ không phải \"tập hợp các độ dốc\"?",
                        "options": [
                            {
                                "value": "a",
                                "label": "Vì nó chỉ áp dụng cho đa thức."
                            },
                            {
                                "value": "b",
                                "label": "Vì nó gán một giá trị duy nhất cho mỗi đầu vào theo một quy tắc nhất quán."
                            },
                            {
                                "value": "c",
                                "label": "Vì nó luôn có cùng miền xác định với $f$."
                            },
                            {
                                "value": "d",
                                "label": "Vì nó có thể vẽ trong không gian 3D."
                            }
                        ],
                        "correct": "b",
                        "explanation": "$f'$ là hàm số vì nó ánh xạ mỗi $x$ đến đúng một giá trị $f'(x)$ theo một quy tắc cố định — đây là định nghĩa của hàm số."
                    }
                }
            ]
        },
        {
            "order_index": 6,
            "blocks": [
                {
                    "id": "quiz-m3l3-q4",
                    "type": "quiz",
                    "content": {
                        "question": "Với $f(x) = x^2$, phát biểu nào mô tả đúng $f'$?",
                        "options": [
                            {
                                "value": "a",
                                "label": "$f'(x) = x^2$ — giống hệt $f$."
                            },
                            {
                                "value": "b",
                                "label": "$f'(x) = 2x$ — hàm mới, bậc một."
                            },
                            {
                                "value": "c",
                                "label": "$f'(x) = 2$ — hằng số."
                            },
                            {
                                "value": "d",
                                "label": "$f'(x) = x$ — phiên bản đơn giản hơn của $f$."
                            }
                        ],
                        "correct": "b",
                        "explanation": "$f'(x) = \\lim_{h \\to 0}(2x + h) = 2x$. Đạo hàm của hàm bậc hai là hàm bậc nhất — một hàm số với bậc khác."
                    }
                }
            ]
        },
        {
            "order_index": 7,
            "blocks": [
                {
                    "id": "quiz-m3l3-q5",
                    "type": "quiz",
                    "content": {
                        "question": "$f(x) = x^3 - 3x$ có $f'(x) = 3x^2 - 3$. Khi $a$ thay đổi từ $-1$ đến $1$, $f'(a)$ mang giá trị như thế nào?",
                        "options": [
                            {
                                "value": "a",
                                "label": "Luôn dương."
                            },
                            {
                                "value": "b",
                                "label": "Luôn âm."
                            },
                            {
                                "value": "c",
                                "label": "Âm với $a \\in (-1, 1)$, bằng $0$ tại các đầu mút."
                            },
                            {
                                "value": "d",
                                "label": "Dương với $a \\in (-1, 1)$, bằng $0$ tại các đầu mút."
                            }
                        ],
                        "correct": "c",
                        "explanation": "$f'(x) = 3(x^2 - 1) < 0$ khi $|x| < 1$. Hàm đang giảm trên $(-1, 1)$ — đúng với những gì tương tác cho thấy."
                    }
                }
            ]
        },
        {
            "order_index": 8,
            "blocks": [
                {
                    "id": "quiz-m3l3-q6",
                    "type": "quiz",
                    "content": {
                        "question": "Miền xác định của $f'$ liên quan đến miền của $f$ như thế nào?",
                        "options": [
                            {
                                "value": "a",
                                "label": "Luôn đồng nhất với miền của $f$."
                            },
                            {
                                "value": "b",
                                "label": "Tập hợp các điểm trong miền $f$ mà giới hạn định nghĩa $f'$ tồn tại."
                            },
                            {
                                "value": "c",
                                "label": "Luôn là tập con thực sự của miền $f$."
                            },
                            {
                                "value": "d",
                                "label": "Luôn là toàn bộ $\\mathbb{R}$."
                            }
                        ],
                        "correct": "b",
                        "explanation": "$f'(x)$ chỉ tồn tại khi giới hạn tồn tại. Có những điểm thuộc miền $f$ nhưng $f'$ không xác định tại đó — chủ đề của bài học tiếp theo."
                    }
                }
            ]
        },
        {
            "order_index": 9,
            "blocks": [
                {
                    "id": "quiz-m3l3-q7",
                    "type": "quiz",
                    "content": {
                        "question": "Nếu $f(x) = 5$ (hằng số), hàm $f'$ là gì?",
                        "options": [
                            {
                                "value": "a",
                                "label": "$f'(x) = 5$."
                            },
                            {
                                "value": "b",
                                "label": "$f'(x) = 1$."
                            },
                            {
                                "value": "c",
                                "label": "$f'(x) = 0$."
                            },
                            {
                                "value": "d",
                                "label": "$f'$ không tồn tại."
                            }
                        ],
                        "correct": "c",
                        "explanation": "$\\lim_{h \\to 0} \\frac{5-5}{h} = 0$ tại mọi $x$. Đạo hàm của hàm hằng là hàm không — tốc độ thay đổi của đại lượng không thay đổi luôn bằng $0$."
                    }
                }
            ]
        },
        {
            "order_index": 10,
            "blocks": [
                {
                    "id": "quiz-m3l3-q8",
                    "type": "quiz",
                    "content": {
                        "question": "Nhiệt độ $T(t)$ tăng, rồi giảm, rồi tăng lại. Hàm $T'(t)$ trông như thế nào?",
                        "options": [
                            {
                                "value": "a",
                                "label": "Tăng suốt."
                            },
                            {
                                "value": "b",
                                "label": "Dương, rồi âm, rồi dương."
                            },
                            {
                                "value": "c",
                                "label": "Giảm suốt."
                            },
                            {
                                "value": "d",
                                "label": "Luôn bằng $0$."
                            }
                        ],
                        "correct": "b",
                        "explanation": "$T' > 0$ khi $T$ tăng, $T' < 0$ khi $T$ giảm. Mô hình dấu của $T'$ phản chiếu đúng mô hình đơn điệu của $T$."
                    }
                }
            ]
        },
        {
            "order_index": 11,
            "blocks": [
                {
                    "id": "quiz-m3l3-q9",
                    "type": "quiz",
                    "content": {
                        "question": "Nếu $f'(x) = 0$ tại mọi $x$ trong một khoảng, kết luận gì về $f$ trên khoảng đó?",
                        "options": [
                            {
                                "value": "a",
                                "label": "$f$ bằng $0$ trên khoảng đó."
                            },
                            {
                                "value": "b",
                                "label": "$f$ là hằng số trên khoảng đó."
                            },
                            {
                                "value": "c",
                                "label": "$f$ là hàm tăng trên khoảng đó."
                            },
                            {
                                "value": "d",
                                "label": "$f$ đạt cực tiểu toàn cục trên khoảng đó."
                            }
                        ],
                        "correct": "b",
                        "explanation": "Nếu tốc độ thay đổi bằng $0$ khắp nơi trong một khoảng, hàm số không thay đổi — nó phải là hằng số trên khoảng đó."
                    }
                }
            ]
        }
    ]
}